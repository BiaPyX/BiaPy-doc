

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>NucMM dataset: 3d neuronal nuclei instance segmentation &mdash; BiaPy  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="../API.html" />
    <link rel="prev" title="MitoEM dataset: large-scale 3d mitochondria instance segmentation" href="mitoem.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BiaPy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/how_it_works.html">How it works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/select_workflow.html">Select workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflows/semantic_segmentation.html">Semantic segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/instance_segmentation.html">Instance segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/detection.html">Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/denoising.html">Denoising</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/super_resolution.html">Super-resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/self_supervision.html">Self-supervision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/classification.html">Classification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="stable.html">Stable DNN architectures for mitochondria segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartocell.html">CartoCell, a high-throughput pipeline for accurate 3D image analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="mitoem.html">MitoEM dataset: large-scale 3d mitochondria instance segmentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NucMM dataset: 3d neuronal nuclei instance segmentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#problem-description">Problem description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-preparation">Data preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../config/main_config.html">config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../engine/engine.html">engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models/models.html">models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/utils.html">utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bibliography</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BiaPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>NucMM dataset: 3d neuronal nuclei instance segmentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nucmm-dataset-3d-neuronal-nuclei-instance-segmentation">
<span id="nucleus-tutorial"></span><h1>NucMM dataset: 3d neuronal nuclei instance segmentation<a class="headerlink" href="#nucmm-dataset-3d-neuronal-nuclei-instance-segmentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problem-description">
<h2>Problem description<a class="headerlink" href="#problem-description" title="Permalink to this headline">¶</a></h2>
<p>The goal is to segment and identify automatically each cell nuclei in EM images. To solve such task pairs of EM images and their corresponding instance segmentation labels are provided. Below a pair example is depicted:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><div class="figure align-center" id="id2">
<img alt="../_images/nucmm_z_volume.gif" src="../_images/nucmm_z_volume.gif" />
<p class="caption"><span class="caption-text">MitoEM-H tissue image sample.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</td>
<td><div class="figure align-center" id="id3">
<img alt="../_images/nucmm_z_volume_mask.gif" src="../_images/nucmm_z_volume_mask.gif" />
<p class="caption"><span class="caption-text">Its corresponding instance mask.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</td>
</tr>
</tbody>
</table>
<p>In this dataset <code class="docutils literal notranslate"><span class="pre">27</span></code> 3D images of size <code class="docutils literal notranslate"><span class="pre">(64,</span> <span class="pre">64,</span> <span class="pre">64)</span></code> voxels, for <code class="docutils literal notranslate"><span class="pre">(z,x,y)</span></code> axes, are used for train while the test is
done over the whole Zebrafish volume. Here is a training sample and its ground truth:</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../_images/nucmm_z_paper_view.png"><img alt="Nucmm-z dataset overview" src="../_images/nucmm_z_paper_view.png" style="width: 576.0px; height: 178.5px;" /></a>
<p class="caption"><span class="caption-text">Overview of the NucMM-Z dataset volume. Electron microscopy (EM) volume
covering nearly a whole zebrafish brain. Modified image from <span id="id1">[<a class="reference internal" href="../bibliography.html#id2" title="Zudi Lin, Donglai Wei, Mariela D. Petkova, Yuelong Wu, Zergham Ahmed, Krishna Swaroop K, Silin Zou, Nils Wendt, Jonathan Boulanger-Weill, Xueying Wang, Nagaraju Dhanyasi, Ignacio Arganda-Carreras, Florian Engert, Jeff Lichtman, and Hanspeter Pfister. Nucmm dataset: 3d neuronal nuclei instance segmentation at sub-cubic millimeter scale. 2021. arXiv:2107.05840.">LWP+21</a>]</span>.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="data-preparation">
<h2>Data preparation<a class="headerlink" href="#data-preparation" title="Permalink to this headline">¶</a></h2>
<p>You need to download NucMM dataset first from these <a class="reference external" href="https://drive.google.com/drive/folders/1_4CrlYvzx0ITnGlJOHdgcTRgeSkm9wT8">link</a>. Once you have donwloaded this data you need to create a directory tree as described in <a class="reference internal" href="../workflows/instance_segmentation.html#instance-segmentation-data-prep"><span class="std std-ref">Data preparation</span></a>. To adapt the <code class="docutils literal notranslate"><span class="pre">.h5</span></code> file format provided by MitoEM authors into <code class="docutils literal notranslate"><span class="pre">.tif</span></code> files you can use the script <a class="reference external" href="https://github.com/danifranco/BiaPy/blob/master/utils/scripts/h5_to_tif.py">h5_to_tif.py</a>.</p>
</div>
<div class="section" id="configuration-file">
<h2>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>To create the YAML file you can use the template <a class="reference external" href="https://github.com/danifranco/BiaPy/blob/master/templates/instance_segmentation/resunet_3d_instances.yaml">resunet_3d_instances.yaml</a> which is prepared for this tutorial.</p>
</div>
<div class="section" id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<p>To run it via <strong>command line</strong> or <strong>Docker</strong> you can follow the same steps as decribed in <a class="reference internal" href="../workflows/instance_segmentation.html#instance-segmentation-run"><span class="std std-ref">Run</span></a>.</p>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>The results follow same structure as explained in <a class="reference internal" href="../workflows/instance_segmentation.html#instance-segmentation-results"><span class="std std-ref">Results</span></a>. The results should be something like the following:</p>
<p>The resulting instance segmentation should be something like this:</p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="../_images/nucmm_z_instances_medium.gif"><img alt="Nucmm-z dataset overview" src="../_images/nucmm_z_instances_medium.gif" style="width: 768.0px; height: 275.2px;" /></a>
<p class="caption"><span class="caption-text">Instance segmentation results on the whole dataset.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="../_images/smallpart_nucmm_z_instances.gif"><img alt="Nucmm-z dataset overview (zoomed version)" src="../_images/smallpart_nucmm_z_instances.gif" style="width: 228.8px; height: 345.6px;" /></a>
<p class="caption"><span class="caption-text">Zoom of a small region of the instance prediction.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../API.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="mitoem.html" class="btn btn-neutral float-left" title="MitoEM dataset: large-scale 3d mitochondria instance segmentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Daniel Franco-Barranco.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>