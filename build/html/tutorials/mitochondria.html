

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2D Mitochondria segmentation &mdash; BiaPy  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2D Mitochondria instance segmentation" href="mitochondria_instance.html" />
    <link rel="prev" title="3D Cysto Instance Segmentation" href="cysto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BiaPy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/how_it_works.html">How it works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/select_workflow.html">Select workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflows/semantic_segmentation.html">Semantic segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/instance_segmentation.html">Instance segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/detection.html">Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/denoising.html">Denoising</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/super_resolution.html">Super-resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/self_supervision.html">Self-supervision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/classification.html">Classification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cysto.html">3D Cysto Instance Segmentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2D Mitochondria segmentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#problem-description">Problem description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-preparation">Data preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#problem-resolution">Problem resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#choose-a-template">Choose a template</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#evaluation">Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#citation">Citation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mitochondria_instance.html">2D Mitochondria instance segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="nucleus.html">3D Nuclei Instance Segmentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../config/main_config.html">config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../engine/engine.html">engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models/models.html">models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/utils.html">utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bibliography</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BiaPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>2D Mitochondria segmentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="d-mitochondria-segmentation">
<span id="mito-tutorial"></span><h1>2D Mitochondria segmentation<a class="headerlink" href="#d-mitochondria-segmentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problem-description">
<h2>Problem description<a class="headerlink" href="#problem-description" title="Permalink to this headline">¶</a></h2>
<p>The goal is to segment automatically mitochondria in EM images. This is a
semantic segmentation problem where pairs of EM image and its corresponding
mitochodria mask are provided. Our purpose is to segment automatically other
mitochondria in images not used during train labeling each pixel with the
corresponding class: background or foreground. In this example,
<a class="reference external" href="https://www.epfl.ch/labs/cvlab/data/data-em/">EPFL Hippocampus</a> dataset is
used, so the foreground class correspond to mitochondria.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><div class="figure align-center" id="id1">
<img alt="../_images/FIBSEM_test_0.png" src="../_images/FIBSEM_test_0.png" />
<p class="caption"><span class="caption-text">EM tissue image sample.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</td>
<td><div class="figure align-center" id="id2">
<img alt="../_images/FIBSEM_test_0_gt.png" src="../_images/FIBSEM_test_0_gt.png" />
<p class="caption"><span class="caption-text">Its corresponding mask.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-preparation">
<h2>Data preparation<a class="headerlink" href="#data-preparation" title="Permalink to this headline">¶</a></h2>
<p>The data directory tree should follow the structure described <a class="reference external" href="../how_to_run/first_steps.html#step-1-data-preparation">First steps -&gt; Step 1: Data preparation</a>.</p>
</div>
<div class="section" id="problem-resolution">
<h2>Problem resolution<a class="headerlink" href="#problem-resolution" title="Permalink to this headline">¶</a></h2>
<p>All the models are prepared to make semantic segmentation. The model will output the probability of each pixel of beeing
the foreground class (mitochondria in this case).</p>
</div>
<div class="section" id="choose-a-template">
<h2>Choose a template<a class="headerlink" href="#choose-a-template" title="Permalink to this headline">¶</a></h2>
<p>Refer to the code version <a class="reference external" href="https://github.com/danifranco/BiaPy/releases/tag/v1.0">V1.0</a> in case you want to reproduce exact results of <a class="reference external" href="#citation">Stable Deep Neural Network Architectures for Mitochondria Segmentation on Electron Microscopy Volumes</a>. Once the code is cloned you can use any of the templates from <a class="reference external" href="https://github.com/danifranco/BiaPy/tree/v1.0/templates">here</a>.</p>
<p>Otherwise, to create the YAML file you can use the template <a class="reference external" href="https://github.com/danifranco/BiaPy/blob/master/templates/unet_2d.yaml">unet_2d.yaml</a> which is prepared for this tutorial.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Adapt the configuration file to your specific case and see more configurable options available at <a class="reference external" href="https://github.com/danifranco/BiaPy/blob/master/config/config.py">config.py</a>.</p>
</div>
</div>
<div class="section" id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<p>Run the code with any of the options described in <strong>HOW TO RUN</strong> section that best suits you. For instance, you can run
it through bash shell as described in: <a class="reference external" href="../how_to_run/bash.html#step-2-run-the-code">Bash Shell -&gt; Step 2: Run the code</a>.</p>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>The results are placed in <code class="docutils literal notranslate"><span class="pre">results</span></code> folder under <code class="docutils literal notranslate"><span class="pre">--result_dir</span></code> directory with the <code class="docutils literal notranslate"><span class="pre">--name</span></code> given. See <a class="reference external" href="../how_to_run/first_steps.html#step-4-analizing-the-results">Step-4-analizing-the-results</a> to find more details about the files and directories created. There
you should find something similiar to these results:</p>
<div class="figure align-center" id="id3">
<img alt="../_images/unet2d_prediction.gif" src="../_images/unet2d_prediction.gif" />
<p class="caption"><span class="caption-text">2D U-Net model predictions. From left to right: original test images, its ground truth (GT) and the overlap between
GT and the model’s output.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="evaluation">
<h2>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h2>
<p>To evaluate the quality of the results in semantic segmentation:</p>
<ul class="simple">
<li><p>IoU values will be printed when <code class="docutils literal notranslate"><span class="pre">DATA.TEST.LOAD_GT</span></code> is True, as we have GT to compare the predictions with. The results
will be divided in: per patch, merging patches and full image depending on the options selected to True in
<code class="docutils literal notranslate"><span class="pre">TEST.STATS.*</span></code> variable.</p></li>
</ul>
</div>
<div class="section" id="citation">
<h2>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">¶</a></h2>
<p>This workflow was used to make the following work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@Article</span><span class="p">{</span><span class="n">Franco</span><span class="o">-</span><span class="n">Barranco2021</span><span class="p">,</span>
         <span class="n">author</span><span class="o">=</span><span class="p">{</span><span class="n">Franco</span><span class="o">-</span><span class="n">Barranco</span><span class="p">,</span> <span class="n">Daniel</span> <span class="ow">and</span> <span class="n">Muñoz</span><span class="o">-</span><span class="n">Barrutia</span><span class="p">,</span> <span class="n">Arrate</span> <span class="ow">and</span> <span class="n">Arganda</span><span class="o">-</span><span class="n">Carreras</span><span class="p">,</span> <span class="n">Ignacio</span><span class="p">},</span>
         <span class="n">title</span><span class="o">=</span><span class="p">{</span><span class="n">Stable</span> <span class="n">Deep</span> <span class="n">Neural</span> <span class="n">Network</span> <span class="n">Architectures</span> <span class="k">for</span> <span class="n">Mitochondria</span> <span class="n">Segmentation</span> <span class="n">on</span> <span class="n">Electron</span> <span class="n">Microscopy</span> <span class="n">Volumes</span><span class="p">},</span>
         <span class="n">journal</span><span class="o">=</span><span class="p">{</span><span class="n">Neuroinformatics</span><span class="p">},</span>
         <span class="n">year</span><span class="o">=</span><span class="p">{</span><span class="mi">2021</span><span class="p">},</span>
         <span class="n">month</span><span class="o">=</span><span class="p">{</span><span class="n">Dec</span><span class="p">},</span>
         <span class="n">day</span><span class="o">=</span><span class="p">{</span><span class="mi">02</span><span class="p">},</span>
         <span class="n">issn</span><span class="o">=</span><span class="p">{</span><span class="mi">1559</span><span class="o">-</span><span class="mi">0089</span><span class="p">},</span>
         <span class="n">doi</span><span class="o">=</span><span class="p">{</span><span class="mf">10.1007</span><span class="o">/</span><span class="n">s12021</span><span class="o">-</span><span class="mi">021</span><span class="o">-</span><span class="mi">09556</span><span class="o">-</span><span class="mi">1</span><span class="p">},</span>
         <span class="n">url</span><span class="o">=</span><span class="p">{</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">doi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">10.1007</span><span class="o">/</span><span class="n">s12021</span><span class="o">-</span><span class="mi">021</span><span class="o">-</span><span class="mi">09556</span><span class="o">-</span><span class="mi">1</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mitochondria_instance.html" class="btn btn-neutral float-right" title="2D Mitochondria instance segmentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="cysto.html" class="btn btn-neutral float-left" title="3D Cysto Instance Segmentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Daniel Franco-Barranco.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>